<script>
var AffiliateSecCatId = "[[S80:AffiliateSecCatId]]";
</script>
<div class="page-header accent-color">
  <div class="container">
    <div class="col-sm-12">
      <h1>Donate</h1>
      <p class="text-large">Thank you for donating to the American Heart Association. With your life-saving donation, we can build healthier lives, free of cardiovascular disease and stroke.</p>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script>$.noConflict()</script>
<script>
jQuery('main > .container').before(jQuery('.page-header'));
</script>
<link rel="stylesheet" href="../amazonpay/heartwalk/css/custom.css">
<script type="text/javascript" src="../amazonpay/heartwalk/googlepay/js/jquery.validate.min.JS"></script> 
<script type="text/javascript" src="../amazonpay/heartwalk/googlepay/js/additional-methods.min.js"></script>
<div class="page-content">
  <div class="thank-you"></div>
  <div class="processing">Processing Donation... <img src="../donation-forms/donatenow/images/ajax-loader.gif" alt="Processing Donation"></div>
  <div class="donate-now donation-form-content" style="background:none;"> 
    <div class="html-caption-container">
      <h2 id="formTitle">You've Got Heart!</h2>
    </div>
    <p class="impactStatement" style="display: block;"></p>
  </div>
  <form class="form-horizontal luminateApi donation-form" method="POST" action="" id="donateform">
    <div class="donation-form-container responsive">
      <input type="hidden" name="instance" value="[[S80:instance]]">
      <input type="hidden" name="recurring" value="false">
      <input type="hidden" name="method" value="donate">
      <input type="hidden" name="affiliate" value="GEN">
      <input type="hidden" name="device_data" id="device_data" value=""/>
      <input type="hidden" name="payment_method_nonce" id="payment_method_nonce" value=""/>
      <input type="hidden" name="processorAuthorizationCode" id="processorAuthorizationCode" value=""/>
      <input type="hidden" name="finish_success_redirect" id="finish_success_redirect" value="https://www2.heart.org/site/SPageNavigator/ym_khc_googlepay_thank_you.html"/>
      <input type="hidden" name="form_id" value="1710">
      <input type="hidden" name="validate" value="true">
      <input type="hidden" name="source" value="GOOGLE PAY">
      <input type="hidden" name="payment_source" value="GOOGLEPAY">
      <input type="hidden" name="_session" value="">
      <input type="hidden" name="additional_amount" value="0">
      <input type="hidden" name="other_amount" value="75">
      <input type="hidden" name="gift_amount" value="75">
      <input type="hidden" name="level_id" value="2447">
      <input type="hidden" name="payment_confirmation_id" value="">
      <input type="hidden" name="PaymentType" id="PaymentType" value="googlepay">
      <input type="hidden" name="payment_type" id="payment_type" value="cash">
      <input type="hidden" name="pm" value="amazon" id="pm_amazon">
      <input type="hidden" name="fr_id" id="fr_id" value="[[S334:FR_ID]]" />
      <input type="hidden" name="mfc_pref" id="mfc_pref" value="T" />
      <input type="hidden" name="proxy_type_value" id="proxy_type_value" value="[[S334:PROXY_TYPE]]" />
      <input type="hidden" name="from_url_js" id="from_url_js" value="" />
      [[?x20x2x::x[[S334:PROXY_TYPE]]x::
      <input type="hidden" name="cons_id" id="cons_id" value="[[S334:PROXY_ID]]" />
      <input type="hidden" name="from_url" value="[[?xheartdevx::x[[S80:instance]]x::https://secure3.convio.net/heartdev::https://www2.heart.org]]/site/TR?fr_id=[[S334:FR_ID]]&pg=personal&px=[[S334:PROXY_ID]]" id="from_url">
      ::]]
      [[?x21x::x[[S334:PROXY_TYPE]]x::
      <input type="hidden" name="ev_id" id="ev_id" value="[[S334:PROXY_ID]]" />
      <input type="hidden" name="from_url" value="[[?xheartdevx::x[[S80:instance]]x::https://secure3.convio.net/heartdev::https://www2.heart.org]]/site/TR?fr_id=[[S334:FR_ID]]&pg=pfind" id="from_url">
      ::]]
      [[?x22x::x[[S334:PROXY_TYPE]]x::
      <input type="hidden" name="team_id" id="team_id" value="[[S334:PROXY_ID]]" />
      <input type="hidden" name="team_gift" value="true">
      <input type="hidden" name="from_url" value="[[?xheartdevx::x[[S80:instance]]x::https://secure3.convio.net/heartdev::https://www2.heart.org]]/site/TR?fr_id=[[S334:FR_ID]]&pg=team&team_id=[[S334:PROXY_ID]]" id="from_url">
      ::]]
      <input type="hidden" name="confirmed" id="confirmed" value="true">
      <input type="hidden" name="gift_display_name" id="gift_display_name" value="Google Pay">
      [[?x[[S334:df_preview]]x::xtruex::
      <input type="hidden" name="sandbox" id="sandbox" value="true">
      <input type="hidden" name="df_preview" value="true" />
      <h1 style="color:#ed1c24">PREVIEW MODE</h1>
      :: 
      <!-- <input type="hidden" name="sandbox" id="sandbox" value="false">  --> 
      ]]
      <input type="hidden" value="" id="tribute_typeg" name="tribute.type">
      <h2 class="section-header-container"> Select an amount: </h2>
      <div class="panel panel-default">
        <div class="panel-body">
          <div class="form-group gift-select hidden">
        	<div class='col-md-12 col-sm-12'>
        		<div class='radio-group col-md-6 text-center'>
        			<input type='radio' name='occurrence' id='occurrence1' value='One-Time Gift' checked data-level=4184 data-frequency="onetime" />
        			<label class='radio-label active' for='occurrence1'>One-Time Gift</label>
        		</div>
        		<div class='radio-group col-md-6 text-left'>
        			<input type='radio' name='occurrence' id='occurrence2' value='Monthly Gift' data-level=4241 data-frequency="recurring" />
        			<label class="radio-label" for='occurrence2'>Monthly Gift</label>
        		</div>
        	</div> <!-- end occurrence options -->
          </div>
          <div class="form-group donate-select">
            <div class="col-xs-12 col-sm-12 onetime">
              <div class="text-center">
                <label class="radio-level" for="amount1" data-amount="30" onclick="jQuery('input[name=other_amount], input[name=gift_amount]').val(30)">
                <div class="donation-level-amount-container">$30</div>
                </label>
              </div>
              <div class="text-center">
                <label class="radio-level" for="amount2" data-amount="75" onclick="jQuery('input[name=other_amount], input[name=gift_amount]').val(75)">
                <div class="donation-level-amount-container">$75</div>
                </label>
              </div>
              <div class="text-center">
                <label class="radio-level active" for="amount3" data-amount="150" onclick="jQuery('input[name=other_amount], input[name=gift_amount]').val(150)">
                <div class="donation-level-amount-container">$150</div>
                </label>
              </div>
              <div class="text-center">
                <label class="radio-level" for="amount4" data-amount="250" onclick="jQuery('input[name=other_amount], input[name=gift_amount]').val(250)">
                <div class="donation-level-amount-container">$250</div>
                </label>
              </div>
              <!-- <div class="text-center">
                <label class="radio-level" for="amount5" data-amount="525" onclick="jQuery('input[name=other_amount], input[name=gift_amount]').val(525)">
                <div class="donation-level-amount-container">$525</div>
                </label>
              </div>
              <div class="text-center">
                <label class="radio-level" for="amount6" data-amount="1000" onclick="jQuery('input[name=other_amount], input[name=gift_amount]').val(1000)">
                <div class="donation-level-amount-container">$1,000</div>
                </label>
              </div> -->
              <div class="text-center">
                <label for="level-other" class="level_other">Other </label>
                <div class="level-other-input" style="float:left;"> <span class="input-group-addon">$</span>
                  <input type="text" class="form-control validDonation" id="other-amount-entered" name="other_amount_entered" disabled onblur="jQuery('input[name=other_amount], input[name=gift_amount]').val(this.value)">
                </div>
	            </div>
            </div>
          </div>
        </div>
      </div>
      <script type="text/javascript">
		jQuery('.donate-select label').click(function(){
			jQuery('.donate-select .active').removeClass("active");
			jQuery(this).addClass("active");
		});
	  </script>
      <div class="panel panel-default payment-type active">
        <style>
  .payment-type label img {cursor:pointer;} 
  .payment-type label.active {background:#ccc;border-radius:10px;}
  .payment-type label img {padding: 5px;}
  </style>
        <div class="panel panel-default contact-information">
          <div class="panel-heading">Tell us about yourself</div>
          <div class="panel-body">
            <div class="form-group required">
              <label class="col-sm-3 col-md-3 control-label" for="donor_first_name">First Name:</label>
              <div class="col-sm-8 col-md-6">
                <input class="form-control required" name="first_name" id="donor_first_name" type="text">
              </div>
            </div>
            <div class="form-group required">
              <label class="col-sm-3 col-md-3 control-label" for="donor_last_name">Last Name:</label>
              <div class="col-sm-8 col-md-6">
                <input class="form-control required" name="last_name" id="donor_last_name" type="text">
              </div>
            </div>
            <div class="contact-address" style="">
              <div class="form-group required">
                <label class="col-sm-3 col-md-3 control-label" for="donor_street1">Street 1:</label>
                <div class="col-sm-8 col-md-6">
                  <input type="text" class="form-control required name" name="street1" id="donor_street1">
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 col-md-3 control-label" for="donor_street2">Street 2:</label>
                <div class="col-sm-8 col-md-6">
                  <input type="text" class="form-control" name="street2" id="donor_street2">
                </div>
              </div>
              <div class="form-group required">
                <label class="col-sm-3 col-md-3 control-label" for="donor_zip">Zip/Postal Code:</label>
                <div class="col-sm-8 col-md-6">
                  <input type="text" class="form-control required postal_code" name="zip" id="donor_zip">
                </div>
              </div>
              <div class="form-group required">
                <label class="col-sm-3 col-md-3 control-label" for="donor_city">City:</label>
                <div class="col-sm-8 col-md-6">
                  <input type="text" class="form-control required locality" name="city" id="donor_city">
                </div>
              </div>
              <div class="form-group required">
                <label class="col-sm-3 col-md-3 control-label" for="donor_state">State/Province:</label>
                <div class="col-sm-8 col-md-6">
                  <select class="form-control required administrative_area_level_1" name="state" id="donor_state">
                    <option value="">State/Province</option>
                    <option value="AK">AK - Alaska</option>
                    <option value="AL">AL - Alabama</option>
                    <option value="AR">AR - Arkansas</option>
                    <option value="AZ">AZ - Arizona</option>
                    <option value="CA">CA - California</option>
                    <option value="CO">CO - Colorado</option>
                    <option value="CT">CT - Connecticut</option>
                    <option value="DC">DC - District of Columbia</option>
                    <option value="DE">DE - Delaware</option>
                    <option value="FL">FL - Florida</option>
                    <option value="GA">GA - Georgia</option>
                    <option value="HI">HI - Hawaii</option>
                    <option value="IA">IA - Iowa</option>
                    <option value="ID">ID - Idaho</option>
                    <option value="IL">IL - Illinois</option>
                    <option value="IN">IN - Indiana</option>
                    <option value="KS">KS - Kansas</option>
                    <option value="KY">KY - Kentucky</option>
                    <option value="LA">LA - Louisiana</option>
                    <option value="MA">MA - Massachusetts</option>
                    <option value="MD">MD - Maryland</option>
                    <option value="ME">ME - Maine</option>
                    <option value="MI">MI - Michigan</option>
                    <option value="MN">MN - Minnesota</option>
                    <option value="MO">MO - Missouri</option>
                    <option value="MS">MS - Mississippi</option>
                    <option value="MT">MT - Montana</option>
                    <option value="NC">NC - North Carolina</option>
                    <option value="ND">ND - North Dakota</option>
                    <option value="NE">NE - Nebraska</option>
                    <option value="NH">NH - New Hampshire</option>
                    <option value="NJ">NJ - New Jersey</option>
                    <option value="NM">NM - New Mexico</option>
                    <option value="NV">NV - Nevada</option>
                    <option value="NY">NY - New York</option>
                    <option value="OH">OH - Ohio</option>
                    <option value="OK">OK - Oklahoma</option>
                    <option value="OR">OR - Oregon</option>
                    <option value="PA">PA - Pennsylvania</option>
                    <option value="RI">RI - Rhode Island</option>
                    <option value="SC">SC - South Carolina</option>
                    <option value="SD">SD - South Dakota</option>
                    <option value="TN">TN - Tennessee</option>
                    <option value="TX">TX - Texas</option>
                    <option value="UT">UT - Utah</option>
                    <option value="VA">VA - Virginia</option>
                    <option value="VT">VT - Vermont</option>
                    <option value="WA">WA - Washington</option>
                    <option value="WI">WI - Wisconsin</option>
                    <option value="WV">WV - West Virginia</option>
                    <option value="WY">WY - Wyoming</option>
                    <option value="AS">AS - American Samoa</option>
                    <option value="FM">FM - Federated States of Micronesia</option>
                    <option value="GU">GU - Guam</option>
                    <option value="MH">MH - Marshall Islands</option>
                    <option value="MP">MP - Northern Mariana Islands</option>
                    <option value="PR">PR - Puerto Rico</option>
                    <option value="PW">PW - Palau</option>
                    <option value="VI">VI - Virgin Islands</option>
                    <option value="AA">AA - Armed Forces Americas</option>
                    <option value="AE">AE - Armed Forces</option>
                    <option value="AP">AP - Armed Forces Pacific</option>
                    <option value="AB">AB - Alberta</option>
                    <option value="BC">BC - British Columbia</option>
                    <option value="MB">MB - Manitoba</option>
                    <option value="NB">NB - New Brunswick</option>
                    <option value="NL">NL - Newfoundland and Labrador</option>
                    <option value="NS">NS - Nova Scotia</option>
                    <option value="NT">NT - Northwest Territories</option>
                    <option value="NU">NU - Nunavut</option>
                    <option value="ON">ON - Ontario</option>
                    <option value="PE">PE - Prince Edward Island</option>
                    <option value="QC">QC - Quebec</option>
                    <option value="SK">SK - Saskatchewan</option>
                    <option value="YT">YT - Yukon</option>
                    <option value="None">None</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="form-group required email-address">
              <label class="col-sm-3 col-md-3 control-label" for="donor_email">Email Address:</label>
              <div class="col-sm-8 col-md-6">
                <input type="email" class="form-control required" name="email" id="donor_email">
              </div>
            </div>
            <div class="form-group checkbox">
              <input type="checkbox" name="cover_fee" id="cover_fee" value="yes"> 
              <label for="cover_fee">I'd like to go one step further in my support and cover all transaction fees!</label>
            </div>

            <div style="font-size: 1.5em;font-weight: bold;">
              Amount: $<span id="confirmationAmt">75</span>
           </div>
           <a href="javascript:void(0)" class="donate_popover" data-placement="top" data-trigger="focus" role="button"
               data-toggle="popover" title=""
               data-content="By adding this additional amount to your donation you are contributing added funds to offset our 2.9% credit card processing fee and the $.29 transactional fee. By covering these fees, your entire donation is going towards fighting heart disease. All gifts are fully tax deductible to the extent allowed by law."
               tabindex="99" data-original-title="Why Donate">What does this additional donation amount do?</a>

            <div class="form-group checkbox required privacyText">
              <input type="checkbox" id="tos" class="tos required" name="tos" value="true" aria-required="true" title="Please accept the privacy policy">
              <label for="tos">I accept the <a href="http://www.heart.org/privacy" target="_blank">AHA privacy policy</a></label>
              <div class="error input-group checkBox col-xs-12 col-sm-12">
                <label id="tos-error" for="tos" class="error" style="display: none;">Please accept the privacy policy</label>
              </div>
            </div>
          </div>
        </div>
        <input type="hidden" class="form-control" name="billing_first_name" id="billing_first_name">
        <input type="hidden" class="form-control" name="billing_last_name" id="billing_last_name">
        <input type="hidden" class="form-control" name="billing_street1" id="billing_street1">
        <input type="hidden" class="form-control" name="billing_street2" id="billing_street2">
        <input type="hidden" class="form-control" name="billing_city" id="billing_city">
        <input type="hidden" class="form-control" name="billing_state" id="billing_state">
        <input type="hidden" class="form-control" name="billing_zip" id="billing_zip">
      </div>
      <div class="panel panel-default process-button">
        <div class="panel-body text-center">
	        <div>Click Google Pay button to Donate</div>
          <button type="button" id="donate-submit" class="btn btn-primary btn-primary-googlepay text-center" style="border: 0 none !important;">
            <img src="/donation-forms/donatenow/images/googlepay-button.png"/>
	        </button>
        </div>
        <!-- <div class="privacyText">By making my gift, I accept the <a href="http://www.heart.org/privacy" target="_blank">AHA privacy policy</a></div> -->
      </div>
    </div>
  </form>
</div>


<script src="https://pay.google.com/gp/p/js/pay.js"></script>
<script src="https://js.braintreegateway.com/web/3.41.0/js/client.min.js"></script>
<script src="https://js.braintreegateway.com/web/3.41.0/js/google-payment.min.js"></script>
<script src="https://js.braintreegateway.com/web/3.41.0/js/data-collector.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script> 
<script type="text/javascript" src="../amazonpay/heartwalk/googlepay/js/braintree-luminate.js"></script> 
<script type="text/javascript" src="../amazonpay/heartwalk/googlepay/js/donation-custom.js"></script> 

<script type="text/javascript">
/*
Calculate fee amount
store in additional amount field
Add fee to gift - store in "other_amount"
Display total before submit button
Update amounts and display when the gift amount changes
Submit the 3 amounts (Gift, Fee, Gift+Fee) to hearttools api

gift_amount - original gift
other_amount - total gift + fee
additional_amount - fee
*/


function calculateFee() {
  // get amount from hidden field 
  // var amt = parseInt(jQuery('input[name=gift_amount]').val().replace('$',''));
  var amt = parseInt(jQuery('input[name=gift_amount]').val());
  // formula amt * 2.9% + .29
  var fee = ((amt * .029) + .29).toFixed(2);

  return fee;
}

function setGiftAmount() {
  var amt = parseInt(jQuery('input[name=gift_amount]').val());
  var fee = parseInt(jQuery('input[name=additional_amount]').val());
  
  jQuery('input[name=other_amount]').val(amt + fee);
}

function formatCurrency(amt) {
  return amt.replace(/\d(?=(\d{3})+\.)/g, '$&,');
}

function setDisplayAmount() {
  jQuery('#confirmationAmt').text(formatCurrency(jQuery('input[name=other_amount]').val()));
}

function coverFee() {
  // run additional calculation
  if(jQuery('#cover_fee').prop('checked')){
    jQuery('input[name=additional_amount]').val(calculateFee());
  } else {
    jQuery('input[name=additional_amount]').val(0);
  } 

  setGiftAmount();
  setDisplayAmount();
}

jQuery('#other-amount-entered').on('blur', function(){
  coverFee();
})
jQuery('#cover_fee', '.radio-level').on('click', function(){
  coverFee();
});

</script>